parameters:
    simplr.backend.menu.builder.class: Cleentfaar\Simplr\Bundle\CmsBundle\Menu\Backend\MenuBuilder
    simplr.twig.cms_extension.class: Cleentfaar\Simplr\Bundle\CmsBundle\Twig\CmsExtension
    simplr.controller_listener.class: Cleentfaar\Simplr\Bundle\CmsBundle\EventListener\ControllerListener
    simplr.backend.menu.item.class: Knp\Menu\MenuItem
    simplr.optionmanager.class: Cleentfaar\Simplr\Core\Services\OptionManager
    simplr.pluginmanager.class: Cleentfaar\Simplr\Core\Services\PluginManager
    simplr.thememanager.class: Cleentfaar\Simplr\Core\Services\ThemeManager

services:
    simplr.optionmanager:
        class: %simplr.optionmanager.class%
        arguments: [@doctrine.orm.entity_manager]
    simplr.pluginmanager:
        class: %simplr.pluginmanager.class%
        arguments: [%pathto_plugins%, @simplr.optionmanager]
    simplr.thememanager:
        class: %simplr.thememanager.class%
        arguments: [%pathto_themes%, @simplr.optionmanager]
    simplr.controller_listener:
        class: %simplr.controller_listener.class%
        arguments: [@event_dispatcher, @simplr.thememanager, @simplr.pluginmanager]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }
    simplr.backend.menu.builder:
        class: %simplr.backend.menu.builder.class%
        arguments: ["@knp_menu.factory","@translator","@event_dispatcher"]
    simplr.backend.menu.top:
        class: %simplr.backend.menu.item.class% # the service definition requires setting the class
        factory_service: simplr.backend.menu.builder
        factory_method: createTopMenu
        arguments: ["@request"]
        scope: request # needed as we have the request as a dependency here
        tags:
            - { name: knp_menu.menu, alias: simplr.backend.menu.top } # The alias is what is used to retrieve the menu
    simplr.backend.menu.sidebar:
        class: %simplr.backend.menu.item.class% # the service definition requires setting the class
        factory_service: simplr.backend.menu.builder
        factory_method: createSidebarMenu
        arguments: ["@request"]
        scope: request # needed as we have the request as a dependency here
        tags:
            - { name: knp_menu.menu, alias: simplr.backend.menu.sidebar } # The alias is what is used to retrieve the menu
    simplr.twig.cms_extension:
        class: %simplr.twig.cms_extension.class%
        arguments: [@service_container, @twig.loader.filesystem]
        tags:
            - { name: twig.extension }